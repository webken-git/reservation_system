<<<<<<< HEAD
@startuml entity-relationship-diagram

scale 1.5
left to right direction
skinparam packageStyle rectangle
skinparam linetype ortho


!define MAIN_ENTITY #E2EFDA-C6E0B4
!define MAIN_ENTITY_2 #FCE4D6-F8CBAD

!define METAL #F2F2F2-D9D9D9
!define MASTER_MARK_COLOR AAFFAA
!define TRANSACTION_MARK_COLOR FFAA00

skinparam class {
    BackgroundColor METAL
    BorderColor Black
    ArrowColor Black
}

package "予約システム・管理システム共通" as Common {
    entity "Usersマスタ" as users <<M,MASTER_MARK_COLOR>> {
        + id [pk]
        --
        email : email
        password : char 8-16
    }
}

package "予約システム" as reservation_system {
  entity "Reservationsテーブル" as reservations <<主,TRANSACTION_MARK_COLOR>> MAIN_ENTITY {
    + id [pk]
    --
    # users [fk]
    group_name : char 25
    reader_name : char 25
    contact_name : char 25
    address : char 125
    TEL : phone number
    is_group : bool
    delete_flag : bool
    start : date
    end : date
    organizer_number : int 255
    participant_number : int 255
    purpose : text 75
    admission_fee : int 10000
    # places [fk]
    # equipments [fk]
    # special_equipments [fk]
  }

  entity "User_infoテーブル" as user_info <<T,TRANSACTION_MARK_COLOR>> MAIN_ENTITY_2 {
    + id [pk]
    --
    # users [fk]
    group_name : char 25
    reader_name : char 25
    contact_name : char 25
    address : char 125
    TEL : phone number
    is_group : bool
  }

  entity "Approval_applicationsテーブル" as approval_apps <<T,TRANSACTION_MARK_COLOR>> MAIN_ENTITY_2 {
    + id [pk]
    --
    # reservations [fk]
    usage_fee : int 20000
    heating_fee : int 20000
    electric_fee : int 20000
    condition : text 255
    # approvals [fk]
  }

  entity "Usage_categorizesテーブル" as usage_categorize <<T,TRANSACTION_MARK_COLOR>> MAIN_ENTITY_2 {
    + id [pk]
    --
    # reservations [fk]
    # usages [fk]
  }

  entity "Age_categorizesテーブル" as age_categorize <<T,TRANSACTION_MARK_COLOR>> MAIN_ENTITY_2 {
    + id [pk]
    --
    # reservations [fk]
    # ages [fk]
  }

  entity "Deferred_paymentsテーブル" as defferd_payments <<T,TRANSACTION_MARK_COLOR>> MAIN_ENTITY_2 {
    + id [pk]
    --
    reason : char 50
    # reservations [fk]
  }

  entity "Placesマスタ" as places <<M,MASTER_MARK_COLOR>> {
    + id [pk]
    --
    name : char 25
  }

  entity "Equipmentsマスタ" as equipments <<M,MASTER_MARK_COLOR>> {
    + id [pk]
    --
    name : char 25
  }

  entity "Spacial_equipmentsマスタ" as special_equipments <<M,MASTER_MARK_COLOR>> {
    + id [pk]
    --
    name : char 25
  }

  entity "Agesマスタ" as ages <<M,MASTER_MARK_COLOR>> {
     + id [pk]
    --
    name : char 25
  }

  entity "Usagesマスタ" as usages <<M,MASTER_MARK_COLOR>> {
    + id [pk]
    --
    name : char 25
  }

  entity "Approvalsマスタ" as approvals <<M,MASTER_MARK_COLOR>> {
     + id [pk]
    --
    name : char 25
  }
}

users             |o--o{    reservations
users             |o--o{    user_info
reservations      ||--|{    places
reservations      ||--|{    equipments
reservations      ||--|{    special_equipments
approval_apps     ||--||    reservations
age_categorize    ||--||    reservations
usage_categorize  ||--||    reservations
defferd_payments  ||--||    reservations
approval_apps     ||--|{    approvals
age_categorize    ||--|{    ages
usage_categorize  ||--|{    usages
@enduml
=======
@startuml entity-relationship-diagram

scale 1.5
left to right direction
skinparam actorStyle awesome
skinparam packageStyle rectangle
skinparam linetype ortho

skinparam sequence {
  ActorFontSize 28
  ParticipantFontSize 28
  ArrowFontSize 28
  titleFontSize 28
}
skinparam UsecaseStereotypeFontSize  28

skinparam usecase {
  BackgroundColor DarkSeaGreen
  BorderColor DarkSlateGray
}

skinparam actor {
        BackgroundColor #333333
        BorderColor #999999
}

package "予約システム・管理システム共通" as Common {
    Class "usersマスタ" as users <<M,AAFFAA>> {
        +id [pk]
        --
        email : email
        password
    }
}
' rectangle 予約システム {
'   ユーザー --|> (利用登録)
'   note right : 名前、メールアドレス、住所、パスワードを登録
'   ユーザー --|> (施設エリアを選択)
'   ユーザー -left-|> (予約状況を確認)
'   ユーザー --|> (予約日前日にリマインドメールを受信)
'   ユーザー --|> (施設の予約料金を確認)
'   ユーザー --|> (施設使用後レビュー案内メールを受信)

'   (施設エリアを選択) --|> (仮予約)
'   (仮予約) -left-|> (予約状況を”仮予約”状態に更新)
'   (予約状況を”仮予約”状態に更新) --|> (予約情報を施設側に送信)
'   (予約情報を施設側に送信) --|> (承認メールを受信) : 承認
'   (予約情報を施設側に送信) --|> (拒否メールを受信) : 拒否
'   (承認メールを受信) ---|> (使用申請書を添付してメール送信) : 使用申請書作成
'   (承認メールを受信) --|> (予約キャンセル)
'   (予約状況を確認) -left-|> (予約キャンセル)
'   (予約キャンセル) --|> (還付案内メールを受信) : 使用料が納付済の場合
' }
' rectangle 予約システム・予約管理システム共通 {
'   ユーザー --|> (ログイン・ログアウト)
'   ユーザー -|> (登録情報の変更・削除)
'   施設側 --|> (ログイン・ログアウト)
'   施設側 --|> (登録情報の変更・削除)
' }

' rectangle 予約管理システム {
'   施設側 --|> (予約申請のメールを受信)
'   施設側 --|> (予約者の顧客情報を管理)
'   施設側 --|> (今までの施設の利用状況データを確認)
'   施設側 -|> (レビューを管理)
'   (予約申請のメールを受信) -|> (承認メールを送信)
'   (予約申請のメールを受信) --|> (拒否メールを送信)
'   (承認メールを送信) -|> (予約状況を更新)
'   (拒否メールを送信) -|> (予約状況を更新)
'   (予約状況を更新) -|> (予約状況をホームページに貼り付け)
' }
@enduml
>>>>>>> 5148086a7a2e4e9c3c120700c387b6251402e7cd
