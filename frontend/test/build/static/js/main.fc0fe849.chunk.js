(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{139:function(e,t,n){"use strict";n.r(t);n(100);var c=n(0),r=n.n(c),a=n(26),s=n.n(a),i=n(19),o=n(146),j=n(21),l=n(30),u=n(2),b=Object(l.b)({name:"spinner",initialState:{progress:!1,show:!1,dialogMessage:"\u30c6\u30b9\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8"},reducers:{startProgress:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{progress:!0,show:!0,dialogMessage:t.payload.dialogMessage})},stopProgress:function(e){return Object(u.a)(Object(u.a)({},e),{},{progress:!1,show:!1,dialogMessage:""})}}}),d=b.actions,O=d.startProgress,h=d.stopProgress,x=function(e){return e.spinner.progress},p=function(e){return e.spinner.show},m=function(e){return e.spinner.dialogMessage},f=b.reducer,g=Object(l.b)({name:"auth",initialState:{isAuthenticated:!1},reducers:{loginUser:function(e){return Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!0})},logoutUser:function(e){return Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!1})}}}),v=g.actions,k=v.loginUser,y=v.logoutUser,w=function(e){return e.auth.isAuthenticated},N=g.reducer,S=n(11),A=Object(l.b)({name:"alert",initialState:{alerts:[]},reducers:{createAlert:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{alerts:[].concat(Object(S.a)(e.alerts),[{message:t.payload.message,type:t.payload.type}])})}}}),L=A.actions.createAlert,C=function(e){return e.notifications.alerts},U=A.reducer,E=Object(l.b)({name:"users",initialState:[],reducers:{getUserList:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{userList:t.payload})},resetUserList:function(){return[]}}}),G=E.actions,T=G.getUserList,I=G.resetUserList,_=function(e){return e.users},P=E.reducer,R=n(33),M=n(92),D=n.n(M),F=Object(j.b)({spinner:f,auth:N,notifications:U,users:P}),B={key:"root",storage:D.a,whitelist:["auth"]},H=Object(R.g)(B,F),Z=Object(l.a)({reducer:H,middleware:Object(l.c)({serializableCheck:{ignoredActions:[R.a,R.f,R.b,R.c,R.d,R.e]}})}),q=n(44),z=n(45),V=n(70),W=n(68),J=n(13),$=n.n(J),K=n(93),X=n.n(K),Q=n(12),Y=n(3);var ee=function(){var e=Object(i.b)();return{isAuthenticated:Object(i.c)(w),loginUser:function(){return e(k())},logoutUser:function(){return e(y())}}},te=n(1),ne=["component"],ce=function(e){var t=e.component,n=Object(Y.a)(e,ne),c=ee().isAuthenticated;return Object(te.jsx)(Q.d,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return c?Object(te.jsx)(t,Object(u.a)({},e)):Object(te.jsx)(Q.c,{to:"/"})}}))},re=["component"],ae=function(e){var t=e.component,n=Object(Y.a)(e,re),c=ee().isAuthenticated;return Object(te.jsx)(Q.d,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return c?Object(te.jsx)(Q.c,{to:"/"}):Object(te.jsx)(t,Object(u.a)({},e))}}))},se=["component"],ie=function(e){var t=e.component,n=Object(Y.a)(e,se),c=ee().isAuthenticated;return Object(te.jsx)(Q.d,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return c?Object(te.jsx)(t,Object(u.a)({},e)):Object(te.jsx)(Q.c,{to:"/login"})}}))},oe=function(){var e=Object(Q.k)();return Object(te.jsxs)("div",{children:[Object(te.jsx)("h1",{children:"Home"}),Object(te.jsx)("p",{children:"\u3042\u306a\u305f\u306f\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u307e\u305b\u3093\u3002"}),Object(te.jsx)("button",{onClick:function(){return e.push("/login")},children:"\u30ed\u30b0\u30a4\u30f3"})]})},je=n(9),le=n.n(je),ue=n(16),be=n(6),de=n(95),Oe=n.n(de);var he=function(){var e=Object(i.b)();return{users:Object(i.c)(_),getUserList:function(t){return e(T(t))},resetUserList:function(){return e(I())}}};var xe=function(){var e=Object(i.b)();return{alerts:Object(i.c)(C),createAlert:function(t){return e(L(t))}}},pe="https://webhok.net/reservation_system",me={LOGIN:"".concat(pe,"/account/login/"),STAFF_LOGIN:"".concat(pe,"/account/staff-login/"),REGISTER:"".concat(pe,"/account/registration/"),LOGOUT:"".concat(pe,"/account/logout/"),CHANGE_PASSWORD:"".concat(pe,"/account/password/change/"),RESET_PASSWORD:"".concat(pe,"/account/password/reset/"),RESET_PASSWORD_CONFIRM:"".concat(pe,"/account/password/reset/confirm/"),GET_USER_DATA:"".concat(pe,"/account/user/"),GET_USER_LIST:"".concat(pe,"/api/users/")},fe=function(){var e=Object(Q.k)(),t=Object(c.useState)(),n=Object(be.a)(t,2),r=(n[0],n[1]),a=Object(c.useState)([]),s=Object(be.a)(a,2),i=(s[0],s[1]),o=xe().createAlert,j=he(),l=j.getUserList,u=j.resetUserList,b=j.users,d=me.GET_USER_LIST,O=me.GET_USER_DATA,h=function(){var e=Object(ue.a)(le.a.mark((function e(){var t,n,c,a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.prev=1,e.next=4,$.a.get(d);case 4:t=e.sent,n=t.data.map((function(e){return e})),c=Oe.a.mapKeys(n,"id"),l(c),i(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),o({message:"\u30e6\u30fc\u30b6\u30fc\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002",type:"danger"});case 15:return e.prev=15,e.next=18,$.a.get(O);case 18:a=e.sent,r(a.data.email),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(15),o({message:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3067\u3059\u3002",type:"danger"});case 25:case"end":return e.stop()}}),e,null,[[1,12],[15,22]])})));return function(){return e.apply(this,arguments)}}(),x=Object.values(b);return Object(c.useEffect)((function(){h()}),[]),Object(te.jsxs)("div",{children:[Object(te.jsx)("h1",{children:"\u30e6\u30fc\u30b6\u30fc\u4e00\u89a7"}),Object(te.jsx)("div",{children:Object(te.jsx)("button",{className:"btn btn-primary",onClick:function(){e.push("/registration")},children:"\u30e6\u30fc\u30b6\u30fc\u767b\u9332"})}),Object(te.jsx)("div",{children:Object(te.jsxs)("table",{className:"table table-striped",children:[Object(te.jsx)("thead",{children:Object(te.jsxs)("tr",{children:[Object(te.jsx)("th",{children:"ID"}),Object(te.jsx)("th",{children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),Object(te.jsx)("th",{children:"\u64cd\u4f5c"})]})}),Object(te.jsx)("tbody",{children:x.map((function(t){return console.log(t),Object(te.jsxs)("tr",{children:[Object(te.jsx)("td",{children:t.id}),Object(te.jsx)("td",{children:t.email}),Object(te.jsxs)("td",{children:[Object(te.jsx)("button",{className:"btn btn-primary",onClick:function(){e.push("/user/edit/".concat(t.id))},children:"\u7de8\u96c6"}),Object(te.jsx)("button",{className:"btn btn-danger",onClick:function(){e.push("/user/delete/".concat(t.id))},children:"\u524a\u9664"})]})]},t.id)}))})]})})]})},ge=n(141),ve=n(142),ke=function(){var e=ee().isAuthenticated,t=Object(te.jsx)(oe,{});return!0===e&&(t=Object(te.jsx)(fe,{})),Object(te.jsx)(ge.a,{fluid:!0,className:"inner",children:Object(te.jsx)(ve.a,{className:"justify-content-center",children:t})})},ye=n(46),we=n(148),Ne=n(143),Se=function(){var e=Object(c.useState)(),t=Object(be.a)(e,2),n=t[0],r=t[1],a=(Object(Q.k)(),Object(ye.a)()),s=a.handleSubmit,i=a.register,o=a.errors,j=xe().createAlert,l=me.GET_USER_DATA,u=function(){var e=Object(ue.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.a.get(l);case 3:t=e.sent,r(t.data.email),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j({message:"\u30e6\u30fc\u30b6\u30fc\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3001\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u518d\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044",type:"danger"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(ue.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.a.patch(l,t);case 3:e.sent,j({message:"\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u3092\u5909\u66f4\u3057\u307e\u3057\u305f",type:"success"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j({message:"\u30ea\u30af\u30a8\u30b9\u30c8\u30a8\u30e9\u30fc\u3067\u3059\u3001\u3059\u3067\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\u540d\u304b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059",type:"danger"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){u()}),[]),Object(te.jsxs)(we.a,{onSubmit:s(b),className:"justify-content-center",children:[Object(te.jsxs)(we.a.Group,{as:ve.a,className:"justify-content-center",controlId:"formHorizontalEmail",children:[Object(te.jsx)(we.a.Label,{children:"\u3042\u306a\u305f\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),Object(te.jsx)(we.a.Control,{name:"email",placeholder:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306f\u30c0\u30df\u30fc\u3067\u3082\u53ef\u80fd\u3067\u3059",type:"email",defaultValue:n,isInvalid:o.email,onClick:function(e){e.preventDefault()},ref:i({required:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306f\u5fc5\u9808\u3067\u3059",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u5f62\u5f0f\u304c\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093"}})})]}),Object(te.jsx)(we.a.Group,{as:ve.a,className:"justify-content-center",children:Object(te.jsx)(Ne.a,{type:"submit",children:"Change User Info"})})]})},Ae=n(96),Le=function(){Object(Q.k)();var e=r.a.memo((function(){return Object(te.jsx)(Se,{})}));return Object(te.jsx)("div",{className:"UserInfoForm",children:Object(te.jsxs)(ge.a,{style:{padding:15},children:[Object(te.jsxs)(Ae.a,{sm:12,md:12,className:"text-center",children:[Object(te.jsx)("h3",{className:"text-center mb-3 mt-3",children:"User Info"}),Object(te.jsx)("p",{children:"\uff0a\u5909\u66f4\u3057\u305f\u304f\u306a\u3044\u9805\u76ee\u306f\u30d5\u30a9\u30fc\u30e0\u306e\u5185\u5bb9\u3092\u5909\u66f4\u305b\u305a\u306b\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044"})]}),Object(te.jsx)(e,{}),Object(te.jsx)("div",{className:"UserInfoButton",children:Object(te.jsx)(Ne.a,{className:"mr-2",variant:"success",size:"sm",type:"submit",children:"Go Password Change"})})]})})},Ce=n(144),Ue=function(e){var t=e.onSubmit,n=Object(ye.a)(),c=n.register,r=n.handleSubmit,a=n.errors,s=n.formState;return Object(te.jsx)("div",{children:Object(te.jsxs)(we.a,{noValidate:!0,onSubmit:r(t),className:"justify-content-center",children:[Object(te.jsxs)(we.a.Group,{controlId:"email",children:[Object(te.jsx)(we.a.Label,{children:"Email"}),Object(te.jsx)(we.a.Control,{type:"email",name:"email",placeholder:"Enter email",ref:c({required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"invalid email address"}})}),a.email&&Object(te.jsx)(we.a.Control.Feedback,{type:"invalid",children:a.email.message})]}),Object(te.jsxs)(we.a.Group,{controlId:"password",children:[Object(te.jsx)(we.a.Label,{children:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(te.jsx)(we.a.Control,{name:"password",placeholder:"Password",type:"password",isInvalid:a.password,onClick:function(e){e.preventDefault()},ref:c({required:"\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059",maxLength:{value:30,message:"30\u6587\u5b57\u4ee5\u5185\u3067\u3059"}})}),a.password&&Object(te.jsx)(we.a.Control.Feedback,{type:"invalid",children:a.password.message})]}),Object(te.jsx)(we.a.Group,{children:Object(te.jsx)(Ce.a,{className:"justify-content-center",children:Object(te.jsx)(Ne.a,{variant:"outline-primary",type:"submit",disabled:s.isSubmitting,children:"\u30ed\u30b0\u30a4\u30f3"})})})]})})},Ee=function(){var e=Object(Q.k)(),t=Object(ye.a)().handleSubmit,n=ee().logoutUser,c=me.LOGOUT,r=function(){var e=Object(ue.a)(le.a.mark((function e(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.next=3,$.a.post(c);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(te.jsxs)("div",{children:[Object(te.jsx)("div",{className:"justify-content-center text-center mt-5 mb-3",children:Object(te.jsx)("h3",{children:"\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u304b\uff1f"})}),Object(te.jsxs)(we.a,{noValidate:!0,onSubmit:t(r),className:"justify-content-center",children:[Object(te.jsx)(we.a.Group,{children:Object(te.jsx)(Ce.a,{className:"justify-content-center",children:Object(te.jsx)(Ne.a,{variant:"danger",type:"submit",children:"\u30ed\u30b0\u30a2\u30a6\u30c8"})})}),Object(te.jsx)("div",{className:"logout-button",children:Object(te.jsx)(Ne.a,{variant:"success",onClick:function(){return e.push("/")},children:"\u30db\u30fc\u30e0\u3078"})})]})]})},Ge=n(151),Te=function(e){return Object(te.jsx)(ge.a,{style:{padding:15},children:Object(te.jsx)(ve.a,{className:"justify-content-center mx-auto mt-5 p-2",children:Object(te.jsx)(Ae.a,{sm:4,md:8,children:Object(te.jsxs)(Ge.a,{className:"text-center",children:[Object(te.jsx)(Ge.a.Header,{children:"\u30ed\u30b0\u30a4\u30f3\u30d5\u30a9\u30fc\u30e0"}),Object(te.jsx)(Ge.a.Body,{children:e.children})]})})})})},Ie=n(150),_e=n(145);var Pe=function(){var e=Object(i.b)();return{progress:Object(i.c)(x),show:Object(i.c)(p),dialogMessage:Object(i.c)(m),startProgress:function(t){return e(O({dialogMessage:t}))},stopProgress:function(){return e(h())}}},Re=function(){var e=Pe(),t=e.show,n=e.dialogMessage;return Object(te.jsxs)(Ie.a,{show:t,backdrop:"static",keyboard:!1,className:"modal-backdrop",children:[Object(te.jsx)(Ie.a.Header,{children:n}),Object(te.jsx)(Ie.a.Body,{children:Object(te.jsx)(_e.a,{animation:"border",role:"status",children:Object(te.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})},Me=function(){var e=xe().createAlert,t=ee(),n=t.loginUser,c=t.isAuthenticated,a=Pe(),s=a.startProgress,i=a.stopProgress,o=a.progress,j=me.LOGIN,l=Object(te.jsx)(Re,{}),u=function(){var t=Object(ue.a)(le.a.mark((function t(c){return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s("\u30ed\u30b0\u30a4\u30f3\u4e2d"),t.prev=1,t.next=4,$.a.post(j,c);case 4:t.sent,n(),e({message:"\u30ed\u30b0\u30a4\u30f3\u306b\u6210\u529f\u3057\u307e\u3057\u305f",type:"success"}),i(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e({message:"\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f",type:"danger"}),i();case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),b=Object(te.jsx)(Ue,{onSubmit:u});return!0===c&&(b=Object(te.jsx)(Ee,{})),o||(l=Object(te.jsx)(Re,{show:!1})),Object(te.jsxs)(r.a.Fragment,{children:[l,Object(te.jsx)(Te,{children:b})]})},De=function(){var e=Object(Q.k)();return Object(te.jsxs)("div",{children:[Object(te.jsx)("h1",{children:"404"}),Object(te.jsx)("p",{children:"Page not found"}),Object(te.jsx)("button",{onClick:function(){return e.push("/")},children:"Go Back Top"})]})},Fe=function(){return Object(te.jsxs)(Q.g,{children:[Object(te.jsx)(Q.d,{exact:!0,path:"/",children:Object(te.jsx)(ke,{})}),Object(te.jsx)(ae,{path:"/login",component:Me}),Object(te.jsx)(ie,{path:"/logout",component:Ee}),Object(te.jsx)(ce,{path:"/user",component:Le}),Object(te.jsx)(Q.d,{component:De})]})},Be=n(18),He=n(41),Ze=n(149),qe=n(147),ze=function(){return Object(te.jsxs)(Ze.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(te.jsx)(He.LinkContainer,{to:"/",children:Object(te.jsx)(Ze.a.Brand,{children:Object(te.jsx)("img",{alt:"",src:"".concat("","/logo192.png"),width:"50",height:"50",className:"d-inline-block align-top"})})}),Object(te.jsx)(Ze.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(te.jsxs)(Ze.a.Collapse,{id:"basic-navbar-nav",children:[Object(te.jsx)(qe.a,{className:"mr-auto",children:Object(te.jsx)(He.LinkContainer,{to:"/user",children:Object(te.jsx)(qe.a.Link,{children:"My Page"})})}),Object(te.jsx)(qe.a,{children:Object(te.jsx)(He.LinkContainer,{to:"/logout",children:Object(te.jsx)(qe.a.Link,{children:"Logout"})})})]})]})},Ve=function(){return Object(te.jsxs)(Ze.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(te.jsx)(He.LinkContainer,{to:"/",children:Object(te.jsx)(Ze.a.Brand,{children:Object(te.jsx)("img",{alt:"",src:"".concat("","/logo192.png"),width:"50",height:"50",className:"d-inline-block align-top"})})}),Object(te.jsx)(Ze.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(te.jsx)(Ze.a.Collapse,{id:"basic-navbar-nav",children:Object(te.jsxs)(qe.a,{className:"ml-auto",children:[Object(te.jsx)(He.LinkContainer,{to:"/login",children:Object(te.jsx)(qe.a.Link,{children:"Login"})}),Object(te.jsx)(He.LinkContainer,{to:"/signup",children:Object(te.jsx)(qe.a.Link,{children:"Sign Up"})})]})})]})},We=function(){var e=ee().isAuthenticated,t=Object(te.jsx)(Ve,{});return!0===e&&(t=Object(te.jsx)(ze,{})),Object(te.jsx)("header",{children:t})},Je=(n(152),n(28));new Je.a,X.a.get("csrftoken");$.a.defaults.xsrfCookieName="csrftoken",$.a.defaults.xsrfHeaderName="X-CSRFToken",$.a.defaults.withCredentials=!0;var $e=function(e){Object(V.a)(n,e);var t=Object(W.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(z.a)(n,[{key:"render",value:function(){return Object(te.jsx)(r.a.Fragment,{children:Object(te.jsx)(Be.BrowserRouter,{children:Object(te.jsxs)("div",{className:"app",children:[Object(te.jsx)(We,{}),Object(te.jsx)(Fe,{})]})})})}}]),n}(c.Component),Ke=n(98),Xe=Object(R.h)(Z);s.a.render(Object(te.jsx)(i.a,{store:Z,children:Object(te.jsx)(o.a,{children:Object(te.jsx)(Ke.a,{loading:null,persistor:Xe,children:Object(te.jsx)($e,{})})})}),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.fc0fe849.chunk.js.map